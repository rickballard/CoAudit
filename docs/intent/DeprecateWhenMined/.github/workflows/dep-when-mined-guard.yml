name: DeprecateWhenMined Guard (hands-off)
on:
  pull_request:
    paths: [ 'docs/intent/DeprecateWhenMined/**' ]
  push:
    branches: [ main ]
    paths: [ 'docs/intent/DeprecateWhenMined/**' ]
jobs:
  validate:
    runs-on: ubuntu-latest
    permissions: { contents: read }
    steps:
      - uses: actions/checkout@v4
      - uses: PowerShell/PowerShell@v1
        with: { pwsh-version: '7.4.x' }
      - name: Check required files
        shell: pwsh
        run: |
          $r='docs/intent/DeprecateWhenMined'
          'README.md','40_SCHEMAS/advisory.schema.json','60_DATA/indices','_deprecate-when-mined.flag' |
            % { if(-not (Test-Path (Join-Path $r $_))){ throw "Missing $r/$_" } }
